<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript | Signal in the Static</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    
    <link rel="preload" href="/CompSci/assets/css/0.styles.df72dcd0.css" as="style"><link rel="preload" href="/CompSci/assets/js/app.29415d2e.js" as="script"><link rel="preload" href="/CompSci/assets/js/2.8a8e11da.js" as="script"><link rel="preload" href="/CompSci/assets/js/32.b110f1b3.js" as="script"><link rel="prefetch" href="/CompSci/assets/js/10.8e596867.js"><link rel="prefetch" href="/CompSci/assets/js/11.58bf7c1a.js"><link rel="prefetch" href="/CompSci/assets/js/12.207d6aff.js"><link rel="prefetch" href="/CompSci/assets/js/13.60e91351.js"><link rel="prefetch" href="/CompSci/assets/js/14.439fc482.js"><link rel="prefetch" href="/CompSci/assets/js/15.b287df79.js"><link rel="prefetch" href="/CompSci/assets/js/16.42ec2a6c.js"><link rel="prefetch" href="/CompSci/assets/js/17.4579b4a8.js"><link rel="prefetch" href="/CompSci/assets/js/18.a7d7985f.js"><link rel="prefetch" href="/CompSci/assets/js/19.316e828c.js"><link rel="prefetch" href="/CompSci/assets/js/20.d539cc26.js"><link rel="prefetch" href="/CompSci/assets/js/21.2879913f.js"><link rel="prefetch" href="/CompSci/assets/js/22.4ab89eaa.js"><link rel="prefetch" href="/CompSci/assets/js/23.100a5e1f.js"><link rel="prefetch" href="/CompSci/assets/js/24.449b518d.js"><link rel="prefetch" href="/CompSci/assets/js/25.6caffbd6.js"><link rel="prefetch" href="/CompSci/assets/js/26.821a8d9f.js"><link rel="prefetch" href="/CompSci/assets/js/27.7ad4d0fb.js"><link rel="prefetch" href="/CompSci/assets/js/28.5f8c4126.js"><link rel="prefetch" href="/CompSci/assets/js/29.f07f23c4.js"><link rel="prefetch" href="/CompSci/assets/js/3.e14f8637.js"><link rel="prefetch" href="/CompSci/assets/js/30.54496606.js"><link rel="prefetch" href="/CompSci/assets/js/31.e1b41370.js"><link rel="prefetch" href="/CompSci/assets/js/33.223ac922.js"><link rel="prefetch" href="/CompSci/assets/js/34.eea928b7.js"><link rel="prefetch" href="/CompSci/assets/js/35.eb70abcf.js"><link rel="prefetch" href="/CompSci/assets/js/36.8c32f7ee.js"><link rel="prefetch" href="/CompSci/assets/js/37.d373f9ba.js"><link rel="prefetch" href="/CompSci/assets/js/38.158c9deb.js"><link rel="prefetch" href="/CompSci/assets/js/39.5092e5d0.js"><link rel="prefetch" href="/CompSci/assets/js/4.e3f0380b.js"><link rel="prefetch" href="/CompSci/assets/js/40.35e53073.js"><link rel="prefetch" href="/CompSci/assets/js/41.b2c00837.js"><link rel="prefetch" href="/CompSci/assets/js/42.5ad0aa4a.js"><link rel="prefetch" href="/CompSci/assets/js/43.41d5e759.js"><link rel="prefetch" href="/CompSci/assets/js/44.179bea35.js"><link rel="prefetch" href="/CompSci/assets/js/45.cc206802.js"><link rel="prefetch" href="/CompSci/assets/js/46.98940f54.js"><link rel="prefetch" href="/CompSci/assets/js/47.37737af9.js"><link rel="prefetch" href="/CompSci/assets/js/48.f63f1dfb.js"><link rel="prefetch" href="/CompSci/assets/js/49.ad937567.js"><link rel="prefetch" href="/CompSci/assets/js/5.5de6ab5b.js"><link rel="prefetch" href="/CompSci/assets/js/50.2619ef08.js"><link rel="prefetch" href="/CompSci/assets/js/51.b2cbd794.js"><link rel="prefetch" href="/CompSci/assets/js/6.334cb108.js"><link rel="prefetch" href="/CompSci/assets/js/7.33d7a852.js"><link rel="prefetch" href="/CompSci/assets/js/8.c0911a58.js"><link rel="prefetch" href="/CompSci/assets/js/9.8eee45cc.js">
    <link rel="stylesheet" href="/CompSci/assets/css/0.styles.df72dcd0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CompSci/" class="home-link router-link-active"><!----> <span class="site-name">Signal in the Static</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CompSci/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/CompSci/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/CompSci/about/" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CompSci/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/CompSci/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/CompSci/about/" class="nav-link">
  About
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/CompSci/blog/" class="sidebar-link">Blog</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Notes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Books/" class="sidebar-heading clickable"><span>Books</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/CompSci/" class="sidebar-heading clickable"><span>CompSci</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Math/" class="sidebar-heading clickable"><span>Math</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Programming/" class="sidebar-heading clickable router-link-active open"><span>Programming</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/CompSci/Programming/class_theory.html" class="sidebar-link">Class Theory</a></li><li><a href="/CompSci/Programming/Electron.html" class="sidebar-link">Electron</a></li><li><a href="/CompSci/Programming/Golang.html" class="sidebar-link">Golang</a></li><li><a href="/CompSci/Programming/Javascript.html" class="active sidebar-link">Javascript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CompSci/Programming/Javascript.html#objects" class="sidebar-link">Objects</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Javascript.html#symbols" class="sidebar-link">Symbols</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Javascript.html#proxies" class="sidebar-link">Proxies</a></li></ul></li><li><a href="/CompSci/Programming/js_performance.html" class="sidebar-link">Javascript Performance</a></li><li><a href="/CompSci/Programming/Python.html" class="sidebar-link">Python</a></li><li><a href="/CompSci/Programming/ReactNative.html" class="sidebar-link">React Native</a></li><li><a href="/CompSci/Programming/Ruby.html" class="sidebar-link">Ruby</a></li><li><a href="/CompSci/Programming/video_engineering.html" class="sidebar-link">Video engineering</a></li><li><a href="/CompSci/Programming/Shell/" class="sidebar-link">ShellScripting</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> Javascript</h1> <p></p><div class="table-of-contents"><ul><li><a href="#objects">Objects</a><ul><li><a href="#sealing-preventing-extension-freezing">Sealing, Preventing Extension, Freezing</a></li><li><a href="#property-descriptors">Property Descriptors</a></li></ul></li><li><a href="#symbols">Symbols</a></li><li><a href="#proxies">Proxies</a><ul><li><a href="#get-proxy-trap">Get Proxy Trap</a></li><li><a href="#has-proxy-trap">Has Proxy Trap</a></li><li><a href="#set-proxy-trap">Set Proxy Trap</a></li><li><a href="#delete-proxy-trap">Delete Proxy Trap</a></li><li><a href="#object-keys-proxy-trap">Object Keys Proxy Trap</a></li><li><a href="#apply-proxy-trap">Apply Proxy Trap</a></li><li><a href="#construct-proxy-trap">Construct Proxy Trap</a></li><li><a href="#get-set-prototype-proxy-traps">Get/Set Prototype Proxy Traps</a></li><li><a href="#extensibility-proxy-traps">Extensibility Proxy Traps</a></li><li><a href="#property-descriptors-proxy-traps">Property Descriptors Proxy Traps</a></li><li><a href="#proxies-property-descriptors">Proxies + Property Descriptors</a></li></ul></li></ul></div><p></p> <p>[TOC]</p> <hr> <h2 id="objects"><a href="#objects" class="header-anchor">#</a> Objects</h2> <p>Objects are everywhere in JavaScript. At their core they are complex key/value stores, commonly referred to as a “Hash Table” data structure. While one can add as many dynamically named properties to an Object as they like, for performance and security reasons it’s better to use a Map in those situations. Objects are better suited for handling a static number of properties with known keys (think class instances).</p> <h3 id="sealing-preventing-extension-freezing"><a href="#sealing-preventing-extension-freezing" class="header-anchor">#</a> Sealing, Preventing Extension, Freezing</h3> <p>Sealing, Preventing Extension, and Freezing allow you to lock down an object to varying degrees. Each one of these approaches has the same effect; an object will no longer be extensible, meaning that new properties cannot be added to the object. However there are small nuances which affect each approach as well.</p> <blockquote><p>It is worth noting that objects within one of these locked down objects will not be affected (since they are two different objects). For that reason you may want to consider recursively locking down objects.</p></blockquote> <h4 id="sealing"><a href="#sealing" class="header-anchor">#</a> Sealing</h4> <p>An object can be sealed by calling <code>Object.seal()</code> on it. Sealing is useful in the situation where you have an object and you want it to adhere to a certain set of expectations regarding the properties it has, however you don’t necessarily want to prevent changes to those properties. Every property on a sealed object will have its <code>configurable</code> property descriptor set to <code>false</code>, however their writable PD won’t change. There is a correlating <code>Object.isSealed()</code> method to see if an object has been sealed.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token string">'first'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'second'</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>p<span class="token punctuation">;</span> <span class="token comment">// fail silently, throw in strict</span>
obj<span class="token punctuation">.</span>p2 <span class="token operator">=</span> <span class="token string">'new val'</span><span class="token punctuation">;</span> <span class="token comment">// fail silently, throw in strict</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { p: 'second' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">isSealed</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { value: 'second', writable: true,</span>
<span class="token comment">//   enumerable: true, configurable: false }</span>
</code></pre></div><h4 id="preventing-extension"><a href="#preventing-extension" class="header-anchor">#</a> Preventing Extension</h4> <p>An object can be prevented from being extended by calling <code>Object.preventExtensions()</code> on it. This is useful in situations where you don’t want new properties to be added to an object. Existing properties can be modified and deleted. It is the “weakest” when compared to Sealing and Freezing an object. It has a correlating <code>Object.isExtensible()</code> method to see if an object can be extended. Existing property descriptors are not modified.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token string">'first'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'second'</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
obj<span class="token punctuation">.</span>p2 <span class="token operator">=</span> <span class="token string">'new val'</span><span class="token punctuation">;</span> <span class="token comment">// fail silently, throw in strict</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { p: 'second' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { value: 'second', writable: true,</span>
<span class="token comment">//   enumerable: true, configurable: true }</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>p<span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre></div><h4 id="freezing"><a href="#freezing" class="header-anchor">#</a> Freezing</h4> <p>An object can be frozen by calling <code>Object.freeze()</code> on it. This is the most extreme tool to lock down an object as no properties can be reassigned, added, or deleted. The property descriptor of each property will have both their writable and configurable values set to false. There is a correlating <code>Object.isFrozen()</code> method which will tell you if an object is frozen.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token string">'first'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'second'</span><span class="token punctuation">;</span> <span class="token comment">// fail silently, throw in strict</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>p<span class="token punctuation">;</span> <span class="token comment">// fail silently, throw in strict</span>
obj<span class="token punctuation">.</span>p2 <span class="token operator">=</span> <span class="token string">'new val'</span><span class="token punctuation">;</span> <span class="token comment">// fail silently, throw in strict</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { p: 'first' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">isFrozen</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { value: 'first', writable: false,</span>
<span class="token comment">//   enumerable: true, configurable: false }</span>
</code></pre></div><h3 id="property-descriptors"><a href="#property-descriptors" class="header-anchor">#</a> Property Descriptors</h3> <blockquote><p>If there’s one thing you should remember about them it is that <em>property descriptors let you lie</em>. All Object Properties have Property Descriptors</p></blockquote> <p>If you think about the intuitive basics of an object, it’s that you can write a property to an object, and then read that property back, and nothing crazy should happen. Well, with property descriptors, one could modify the value when it’s being written, reply with a different value when being retrieved, or even throw an error at any point in time. The basic syntax for defining a property descriptor looks like the following:</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> propertyName<span class="token punctuation">,</span> descriptors<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this example, <code>obj</code> is an Object which you want to define a property on. propertyName is a string name of the property. Finally, descriptors is an object describing the property descriptors.</p> <h4 id="value-and-enumerable"><a href="#value-and-enumerable" class="header-anchor">#</a> Value and Enumerable</h4> <p>The most basic property descriptors are value and enumerable. value contains the value which will be returned when the property is being read. enumerable determines whether or not the property will be visible when listing the properties of the object. Here’s a code sample using these two property descriptors:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	value<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token comment">// the property value</span>
	enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// property will not be listed</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 'foo' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>The enumerable property descriptor has been set to <code>false</code>. This has a few implications, mostly that it becomes a little harder to discover the foo property if we don’t know to look for it. For example, when we call <code>console.log(obj)</code>, we get an empty object in return. When we call <code>Object.keys(obj)</code>, we get an empty array in response. If we know the name of the property we can still use the in operator, like we’re doing with <code>'foo' in obj</code>, which returns a true. However, keep in mind this doesn’t completely hide the property, as we can still find it using <code>Reflect.ownKeys(obj)</code>.</p> <h4 id="writable-and-configurable"><a href="#writable-and-configurable" class="header-anchor">#</a> Writable and Configurable</h4> <p>While <code>value</code> and <code>enumerable</code> dealt with reading properties, <code>writable</code> and <code>configurable</code> deal with writing properties. If a property has <code>writable</code> set to <code>false</code> then that property’s <code>value</code> cannot be reassigned another value. If a property has <code>configurable</code> set to <code>false</code> then it cannot be deleted and it cannot have its property descriptor changed again. The following code example shows these two property descriptors at work:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	value<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
	writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// reassignable?</span>
	configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// deletable/redefinable?</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'bye'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello'</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello'</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: Cannot redefine property: foo</span>
</code></pre></div><h4 id="getters-and-setters"><a href="#getters-and-setters" class="header-anchor">#</a> Getters and Setters</h4> <p>Getters and Setters are some pretty interesting property descriptors, specifically because they allow us to call functions which we define when reading or writing to an object. These are powerful tools with security and performance considerations. The following is an example of the get and set property descriptors:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> realAge<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>realAge<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>realAge <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">'32'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 32</span>
</code></pre></div><p>As of ES2015 there is an even more convenient syntax for defining Getters and Setters on our objects. We can now describe them using the Object Literal syntax. As an example, the following code will result in an object which behaves very similarly to the one above:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	realAge<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>realAge<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>realAge <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">'32'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 32</span>
</code></pre></div><h2 id="symbols"><a href="#symbols" class="header-anchor">#</a> Symbols</h2> <blockquote><p>A symbol is a primitive which cannot be recreated - it cannot be mutated</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><p>Until symbols existed, object keys could only be strings. If we ever attempt to use a non-string value as a key for an object, the value will be coerced to a string. We can see this feature here:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'someobj'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { '2': 2, foo: 'foo', bar: 'bar',</span>
     <span class="token string">'[object Object]'</span><span class="token operator">:</span> <span class="token string">'someobj'</span> <span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>Map</code> data structure was created in part to allow for key/value storage in situations where a key is not a string.</p></blockquote> <p>When instantiating a symbol there is an optional first argument where you can choose to provide it with a string. This value is intended to be used for debugging code, it otherwise doesn’t really affect the symbol itself.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'debug'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'debug'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'xxyy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(debug)</span>
</code></pre></div><p>One if more important use cases for <code>Symbols</code> is <code>Symbols</code> as object keys. Here is an example of using a <code>Symbol</code> as a key within an object:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span>sym<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { bar: 'bar' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>sym<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['bar']</span>
</code></pre></div><p>Notice how they are not returned in the result of <code>Object.keys()</code>. This is, again, for the purpose of backwards compatibility. Old code isn't aware of symbols and so this result shouldn't be returned from the ancient <code>Object.keys()</code> method.</p> <p>Note: <code>Reflect.ownKeys()</code> method is able to get a list of all keys on an object, both strings and symbols alike:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">tryToAddPrivate</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	o<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'Pseudo Private'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">tryToAddPrivate</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ 'prop', Symbol(Pseudo Private) ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre></div><p>Symbols are useful in situations where disparate libraries want to add properties to objects without the risk of having name collisions. By simply using the two character string <code>id</code> as a key, there is a huge risk that multiple libraries will use the same key.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">lib1tag</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	obj<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">lib2tag</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	obj<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">369</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>By making use of symbols, each library can generate their required symbols upon instantiation. Then the symbols can be checked on objects, and set to objects, whenever an object is encountered.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> library1property <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'lib1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">lib1tag</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	obj<span class="token punctuation">[</span>library1property<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> library2property <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'lib2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">lib2tag</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	obj<span class="token punctuation">[</span>library2property<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">369</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="proxies"><a href="#proxies" class="header-anchor">#</a> Proxies</h2> <blockquote><p>A proxy essentially wraps an object and allows us to interpose on various interactions with that object.</p></blockquote> <p>A proxy is essentially a new object which can be used as an intermediary for intercepting calls to an existing target object. Much like with property descriptors, proxies can be defined by using an object with key/value pairs where the key is the name of the “proxy Trap”, and the value is a method to be called when interacting with the proxy.</p> <p>There are about a dozen proxproxy Traps, and if a trap has not been defined then the operation will fall back to performing the default behavior. For example, one of the traps is for getting a value. If you attempt to get a value from a proxy and haven’t specified the get trap, then the proxy will simply retrieve the value from the target object.</p> <p>Proxy Traps will typically have a correlating <code>Reflect</code> method. For example, the has trap has a correlating <code>Reflect.has()</code> method.</p> <p>The basic syntax for defining proxy traps looks like the following:</p> <p><code>const proxy = new Proxy(target, handler)</code></p> <p>Note that if you interact with the original target object, the proxy traps will be bypassed entirely (examples of this are shown below).</p> <blockquote><p>Proxies can be quite useful for writing test code, where you want to assert that very exact operations are being performed on objects.</p></blockquote> <h3 id="get-proxy-trap"><a href="#get-proxy-trap" class="header-anchor">#</a> Get Proxy Trap</h3> <p>The get proxy trap is pretty similar to the getter property descriptor in that both of these can be used to call a function when retrieving a value from an object. However, the get proxy trap is much more powerful. Whereas the property descriptor getter needs to know the name of a property ahead of time, the get proxy trap will be called regardless of the name of the property being accessed. It will even fire if the property doesn’t exist at all!</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// target === orig</span>
		<span class="token comment">// receiver === proxy || receiver === child</span>
		<span class="token keyword">return</span> prop <span class="token keyword">in</span> target <span class="token operator">?</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>orig<span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>orig<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
</code></pre></div><p>In the above example the <code>get</code> proxy trap will check to see if the <code>prop</code> property exists in the <code>target</code> object. If it does it will return an incremented version of the value. If it does not it will return <code>Infinity</code>.</p> <p>Note that the <code>receiver</code> object will either refer to the <code>proxy</code> object itself, or to a child object which has the <code>proxy</code> somewhere in its prototype chain.</p> <h3 id="has-proxy-trap"><a href="#has-proxy-trap" class="header-anchor">#</a> Has Proxy Trap</h3> <p>The has proxy trap is called when code attempts to see if a property exists within an object.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'p'</span> <span class="token keyword">in</span> orig<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'r'</span> <span class="token keyword">in</span> orig<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'p'</span> <span class="token keyword">in</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
</code></pre></div><p>In this example we always reply with a false, which will make it difficult to tell if a property exists within an object.</p> <h3 id="set-proxy-trap"><a href="#set-proxy-trap" class="header-anchor">#</a> Set Proxy Trap</h3> <p>The <code>set</code> proxy trap is called when a value is being set on an object. Much like the benefits of the <code>get</code> proxy trap over the getter property descriptor, this method is called for every single property being set on an object, even if you don’t know the name ahead of time.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		target<span class="token punctuation">[</span>prop<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

orig<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { p: 1 }</span>
proxy<span class="token punctuation">.</span>hello <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { p: 1, HELLO: '1' }</span>
</code></pre></div><p>In this example we will intercept the setting of values. We then uppercase the property name, and stringify the value, before setting it on the underlying object. This can allow us to construct an object similar to the Node.js <code>process.env</code> object.</p> <blockquote><p>Note that the <code>receiver</code> object will either refer to the <code>proxy</code> object itself, or to a child object which has the <code>proxy</code> somewhere in its prototype chain.</p></blockquote> <h3 id="delete-proxy-trap"><a href="#delete-proxy-trap" class="header-anchor">#</a> Delete Proxy Trap</h3> <p>The delete proxy trap is called when a property is being deleted from an object.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">deleteProperty</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">===</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">delete</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// falsey will throw in strict</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>p<span class="token punctuation">;</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>r<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { p: 2 }</span>
</code></pre></div><p>In this example we only allow the delete to affect the underlying <code>target</code> object if the property name is exactly <code>'r'</code>. So, when deleting <code>proxy.p</code>, the operation has no effect, but when deleting <code>proxy.r</code>, the property is removed.</p> <h3 id="object-keys-proxy-trap"><a href="#object-keys-proxy-trap" class="header-anchor">#</a> Object Keys Proxy Trap</h3> <p>The <code>ownKeys</code> proxy trap is called when we attempt to list the keys within an object. It’s triggered in a variety of ways, such as running <code>Object.keys()</code>, <code>Reflect.ownKeys()</code>, <code>for (prop in obj)</code>, etc., on an object.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>sym<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">ownKeys</span><span class="token operator">:</span> <span class="token parameter">target</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">'p'</span><span class="token punctuation">,</span> sym<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['p']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['p', sym]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['p']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [sym]</span>
</code></pre></div><p>In the above example our object has three properties, namely <code>'p'</code>, <code>'r'</code>, and a <code>Symbol</code>. However our <code>ownKeys</code> proxy trap will always respond with <code>'p'</code>, and the <code>Symbol</code>. Depending on how the keys are accessed, the “correct” results will be returned. For example, <code>Object.keys()</code> will only provide string keys.</p> <h3 id="apply-proxy-trap"><a href="#apply-proxy-trap" class="header-anchor">#</a> Apply Proxy Trap</h3> <p>The <code>apply</code> proxy trap is called when a function is called. The second argument is the value of <code>this</code> when the function is called. Arguments to the function are provided as the third argument in an array.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">orig</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">apply</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> self<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Hello, WORLD!'</span>
<span class="token comment">// Also, Function.prototype.apply(), .call()</span>
</code></pre></div><p>In this example we intercept the function call, capitalize the first argument, and pass that to the underlying target function.</p> <h3 id="construct-proxy-trap"><a href="#construct-proxy-trap" class="header-anchor">#</a> Construct Proxy Trap</h3> <p>The <code>construct</code> proxy trap is very similar to the <code>apply</code> proxy trap. However, it is specifically called when the <code>new</code> keyword is being provided.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Original</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">target</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> OriginalProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>Original<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">OriginalProxy</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Hello, TOM!'</span>
</code></pre></div><p>In this example we also take the first argument, capitalize it, and then provide it to the underlying constructor function. Note that this works with any <code>function</code>, not just those defined using the <code>class</code> keyword.</p> <h3 id="get-set-prototype-proxy-traps"><a href="#get-set-prototype-proxy-traps" class="header-anchor">#</a> Get/Set Prototype Proxy Traps</h3> <p>The <code>getPrototypeOf</code>, and <code>setPrototypeOf</code> proxy traps are called when attempting to access the prototype or when trying to override the prototype, respectively.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">getPrototypeOf</span><span class="token operator">:</span> <span class="token parameter">target</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
	<span class="token function-variable function">setPrototypeOf</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> proto</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'no way'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>orig<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: no way</span>
</code></pre></div><p>In the above example we’re lying whenever the prototype is accessed and saying that the value is null. Whenever one attempts to override the prototype we then throw an error. This can be useful for locking down an object and preventing prototype modifications.</p> <h3 id="extensibility-proxy-traps"><a href="#extensibility-proxy-traps" class="header-anchor">#</a> Extensibility Proxy Traps</h3> <p>The <code>preventExtensions</code> and <code>isExtensible</code> proxy traps are called when running <code>Object.preventExtensions()</code> and <code>Object.isExtensible()</code> on a proxy.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">preventExtensions</span><span class="token operator">:</span> <span class="token parameter">target</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function-variable function">isExtensible</span><span class="token operator">:</span> <span class="token parameter">target</span> <span class="token operator">=&gt;</span> Reflect<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token comment">// Note: Can't lie, otherwise will throw Error</span>
</code></pre></div><p>In this example we’re simply calling out to the correlating <code>Reflect</code> methods and returning the values. However we could also throw an error or log the access if we wanted. Note that we can’t actually lie in these situations. For example, if you call <code>Object.preventExtensions(proxy)</code>, and don’t actually prevent extensions on the <code>proxy</code> object, then JavaScript will throw an error. The same thing happens if you lie with the <code>isExtensible</code> result.</p> <h3 id="property-descriptors-proxy-traps"><a href="#property-descriptors-proxy-traps" class="header-anchor">#</a> Property Descriptors Proxy Traps</h3> <p>And finally, the defineProperty and getOwnPropertyDescriptor proxy traps are called when either setting or getting a property descriptor of an object.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>
	<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token function-variable function">defineProperty</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> desc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>desc<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">42</span><span class="token punctuation">)</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> desc<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">getOwnPropertyDescriptor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">tgt<span class="token punctuation">,</span> prp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>tgt<span class="token punctuation">,</span> prp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">43</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>p<span class="token punctuation">,</span> proxy<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42, undefined</span>
</code></pre></div><p>In this example we only allow the <code>defineProperty</code> proxy trap to modify a property descriptor if the value being modified is equal to 42. When reading the property descriptors we simply trigger the default behavior. This is useful for only allowing certain property descriptor settings to be set, or enforcing that all new properties have their <code>configurable</code> property set to <code>false</code>, etc.</p> <h3 id="proxies-property-descriptors"><a href="#proxies-property-descriptors" class="header-anchor">#</a> Proxies + Property Descriptors</h3> <p>Let’s take a look at combining a proxy with a property descriptor:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2. prop desc get'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">'Thomas'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1. proxy get'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">3. </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>proxy<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1. proxy get</span>
<span class="token comment">// 2. prop desc get</span>
<span class="token comment">// 3. Thomas</span>
</code></pre></div><p>In this example we’re using both the get property descriptor applied to our orig object, as well as the get proxy trap with the orig object being the target. When we attempt to read the name property it first calls the proxy trap, then calls the property descriptor, before returning the actual value the calling location.</p> <blockquote><p>Of course, there will be some performance overhead for calling these functions when getting a value from an object, not to mention cognitive overhead to figure out what’s going on, so use them sparingly in production applications.</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/10/2020, 9:41:26 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/CompSci/assets/js/app.29415d2e.js" defer></script><script src="/CompSci/assets/js/2.8a8e11da.js" defer></script><script src="/CompSci/assets/js/32.b110f1b3.js" defer></script>
  </body>
</html>
