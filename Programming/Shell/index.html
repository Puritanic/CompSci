<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell programmming | Signal in the Static</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="Blog, notes and other stuff">
    
    <link rel="preload" href="/CompSci/assets/css/0.styles.6f26e208.css" as="style"><link rel="preload" href="/CompSci/assets/js/app.addad5ad.js" as="script"><link rel="preload" href="/CompSci/assets/js/2.47d44203.js" as="script"><link rel="preload" href="/CompSci/assets/js/47.b4eab3c5.js" as="script"><link rel="preload" href="/CompSci/assets/js/20.0d670cf8.js" as="script"><link rel="prefetch" href="/CompSci/assets/js/10.e31f02d3.js"><link rel="prefetch" href="/CompSci/assets/js/11.d5feaa99.js"><link rel="prefetch" href="/CompSci/assets/js/12.a5967c73.js"><link rel="prefetch" href="/CompSci/assets/js/13.9fa019de.js"><link rel="prefetch" href="/CompSci/assets/js/14.bc022209.js"><link rel="prefetch" href="/CompSci/assets/js/15.d6444033.js"><link rel="prefetch" href="/CompSci/assets/js/16.8a44ed26.js"><link rel="prefetch" href="/CompSci/assets/js/17.0ecfb4d2.js"><link rel="prefetch" href="/CompSci/assets/js/18.64b8ed2a.js"><link rel="prefetch" href="/CompSci/assets/js/19.cc0c9ef2.js"><link rel="prefetch" href="/CompSci/assets/js/21.f66a1dc4.js"><link rel="prefetch" href="/CompSci/assets/js/22.680babcf.js"><link rel="prefetch" href="/CompSci/assets/js/23.794ee8d2.js"><link rel="prefetch" href="/CompSci/assets/js/24.cad1687d.js"><link rel="prefetch" href="/CompSci/assets/js/25.663b74d1.js"><link rel="prefetch" href="/CompSci/assets/js/26.b11977b9.js"><link rel="prefetch" href="/CompSci/assets/js/27.ae536eda.js"><link rel="prefetch" href="/CompSci/assets/js/28.29dea75b.js"><link rel="prefetch" href="/CompSci/assets/js/29.9a87d335.js"><link rel="prefetch" href="/CompSci/assets/js/3.ccc921c2.js"><link rel="prefetch" href="/CompSci/assets/js/30.c2096d66.js"><link rel="prefetch" href="/CompSci/assets/js/31.2be6701e.js"><link rel="prefetch" href="/CompSci/assets/js/32.1462fde3.js"><link rel="prefetch" href="/CompSci/assets/js/33.68c36b33.js"><link rel="prefetch" href="/CompSci/assets/js/34.5a46dc54.js"><link rel="prefetch" href="/CompSci/assets/js/35.4e585339.js"><link rel="prefetch" href="/CompSci/assets/js/36.93bc9b6c.js"><link rel="prefetch" href="/CompSci/assets/js/37.51f67130.js"><link rel="prefetch" href="/CompSci/assets/js/38.dd925397.js"><link rel="prefetch" href="/CompSci/assets/js/39.35a0d3b3.js"><link rel="prefetch" href="/CompSci/assets/js/4.c62e6f70.js"><link rel="prefetch" href="/CompSci/assets/js/40.6facb7d6.js"><link rel="prefetch" href="/CompSci/assets/js/41.0f7863a8.js"><link rel="prefetch" href="/CompSci/assets/js/42.db0d06b4.js"><link rel="prefetch" href="/CompSci/assets/js/43.800ded10.js"><link rel="prefetch" href="/CompSci/assets/js/44.ae7b50e7.js"><link rel="prefetch" href="/CompSci/assets/js/45.3182a574.js"><link rel="prefetch" href="/CompSci/assets/js/46.5c2f482c.js"><link rel="prefetch" href="/CompSci/assets/js/48.3d41b55c.js"><link rel="prefetch" href="/CompSci/assets/js/49.6b99470f.js"><link rel="prefetch" href="/CompSci/assets/js/5.91ddd819.js"><link rel="prefetch" href="/CompSci/assets/js/50.c39f5614.js"><link rel="prefetch" href="/CompSci/assets/js/51.872060eb.js"><link rel="prefetch" href="/CompSci/assets/js/52.a078762b.js"><link rel="prefetch" href="/CompSci/assets/js/53.8b85d108.js"><link rel="prefetch" href="/CompSci/assets/js/54.9763887a.js"><link rel="prefetch" href="/CompSci/assets/js/55.cd6eabe4.js"><link rel="prefetch" href="/CompSci/assets/js/56.c97228ad.js"><link rel="prefetch" href="/CompSci/assets/js/57.1dfab7ee.js"><link rel="prefetch" href="/CompSci/assets/js/58.3f8799b9.js"><link rel="prefetch" href="/CompSci/assets/js/59.78e29f34.js"><link rel="prefetch" href="/CompSci/assets/js/6.78870d27.js"><link rel="prefetch" href="/CompSci/assets/js/60.9a431ff8.js"><link rel="prefetch" href="/CompSci/assets/js/61.b31b6293.js"><link rel="prefetch" href="/CompSci/assets/js/62.e9f3c305.js"><link rel="prefetch" href="/CompSci/assets/js/63.73488751.js"><link rel="prefetch" href="/CompSci/assets/js/64.f6bebfb5.js"><link rel="prefetch" href="/CompSci/assets/js/65.158e176a.js"><link rel="prefetch" href="/CompSci/assets/js/66.491572cf.js"><link rel="prefetch" href="/CompSci/assets/js/67.98dd3c27.js"><link rel="prefetch" href="/CompSci/assets/js/7.ae7feb21.js"><link rel="prefetch" href="/CompSci/assets/js/8.cb0d75f6.js"><link rel="prefetch" href="/CompSci/assets/js/9.c968d3cc.js">
    <link rel="stylesheet" href="/CompSci/assets/css/0.styles.6f26e208.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CompSci/" class="home-link router-link-active"><!----> <span class="site-name">Signal in the Static</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CompSci/" class="nav-link">Home</a></div><div class="nav-item"><a href="/CompSci/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/CompSci/about/" class="nav-link">About</a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CompSci/" class="nav-link">Home</a></div><div class="nav-item"><a href="/CompSci/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/CompSci/about/" class="nav-link">About</a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/CompSci/blog/" class="sidebar-link">Blog</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Notes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Books/" class="sidebar-heading clickable"><span>Books</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/CompSci/" class="sidebar-heading clickable"><span>CompSci</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Math/" class="sidebar-heading clickable"><span>Math</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Programming/" class="sidebar-heading clickable router-link-active open"><span>Programming</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/CompSci/Programming/Brightscript.html" class="sidebar-link">Roku Brightscipt and SceneGraph</a></li><li><a href="/CompSci/Programming/DateTime-shenanigans.html" class="sidebar-link">Date-time shenanigans</a></li><li><a href="/CompSci/Programming/Electron.html" class="sidebar-link">Electron</a></li><li><a href="/CompSci/Programming/Golang.html" class="sidebar-link">Golang</a></li><li><a href="/CompSci/Programming/Javascript.html" class="sidebar-link">Javascript</a></li><li><a href="/CompSci/Programming/Python.html" class="sidebar-link">Python</a></li><li><a href="/CompSci/Programming/ReactNative.html" class="sidebar-link">React Native</a></li><li><a href="/CompSci/Programming/Ruby.html" class="sidebar-link">Ruby</a></li><li><a href="/CompSci/Programming/class_theory.html" class="sidebar-link">Object Oriented Programming</a></li><li><a href="/CompSci/Programming/code_snippets.html" class="sidebar-link">Code snippets</a></li><li><a href="/CompSci/Programming/cpp.html" class="sidebar-link">C++</a></li><li><a href="/CompSci/Programming/js_performance.html" class="sidebar-link">Javascript Performance</a></li><li><a href="/CompSci/Programming/managing_servers.html" class="sidebar-link">[FSM] FullStack notes</a></li><li><a href="/CompSci/Programming/video_engineering.html" class="sidebar-link">Video engineering</a></li><li><a href="/CompSci/Programming/Shell/" aria-current="page" class="active sidebar-link">Shell programmming</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#shebang" class="sidebar-link">Shebang</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#variables" class="sidebar-link">Variables</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#tests" class="sidebar-link">Tests</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#if-statements" class="sidebar-link">If statements</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#for-loop" class="sidebar-link">For loop</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#positional-parameters" class="sidebar-link">Positional parameters</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#accepting-user-input-stdin" class="sidebar-link">Accepting User Input (STDIN)</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#exit-statuses" class="sidebar-link">Exit statuses</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#and" class="sidebar-link">&amp;&amp; AND ||</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#the-semicolon" class="sidebar-link">The semicolon</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#wildcards" class="sidebar-link">Wildcards</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#character-classes" class="sidebar-link">Character Classes</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#case-statements" class="sidebar-link">Case statements</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#logging" class="sidebar-link">Logging</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#while-loops" class="sidebar-link">While loops</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#debugging-shellscript" class="sidebar-link">Debugging shellscript</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#debugging-startup-time" class="sidebar-link">Debugging startup time</a></li><li class="sidebar-sub-header"><a href="/CompSci/Programming/Shell/#reference-related" class="sidebar-link">Reference/Related</a></li></ul></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-solarized-content content__default"><h1 id="shell-programmming"><a href="#shell-programmming" class="header-anchor">#</a> Shell programmming</h1> <p></p><div class="table-of-contents"><ul><li><a href="#shebang">Shebang</a></li><li><a href="#variables">Variables</a><ul><li><a href="#local-variables">Local variables</a></li></ul></li><li><a href="#tests">Tests</a></li><li><a href="#if-statements">If statements</a></li><li><a href="#for-loop">For loop</a></li><li><a href="#positional-parameters">Positional parameters</a></li><li><a href="#accepting-user-input-stdin">Accepting User Input (STDIN)</a></li><li><a href="#exit-statuses">Exit statuses</a></li><li><a href="#and">&amp;&amp; AND ||</a></li><li><a href="#the-semicolon">The semicolon</a></li><li><a href="#functions">Functions</a><ul><li><a href="#creating-a-function">Creating a function</a></li><li><a href="#calling-a-function">Calling a function</a></li><li><a href="#function-exit-statuses-aka-return-codes">Function exit statuses aka return codes</a></li></ul></li><li><a href="#wildcards">Wildcards</a></li><li><a href="#character-classes">Character Classes</a></li><li><a href="#case-statements">Case statements</a></li><li><a href="#logging">Logging</a></li><li><a href="#while-loops">While loops</a></li><li><a href="#debugging-shellscript">Debugging shellscript</a></li><li><a href="#debugging-startup-time">Debugging startup time</a></li><li><a href="#reference-related">Reference/Related</a></li></ul></div><p></p> <p>[TOC]</p> <hr> <ul><li>Contains series of the commands</li> <li>An interpreter executes commands in the script</li> <li>Anything you can type in command line you can put in the script</li> <li>They're great for automating tasks</li></ul> <p>Before running scripts, we need to set up permissions for execution with:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">chmod</span> <span class="token number">755</span> script.sh
</code></pre></div><p>We can run then script with <code>./script.sh</code> in command line.</p> <h2 id="shebang"><a href="#shebang" class="header-anchor">#</a> Shebang</h2> <p><code>#!</code> (shebang) Specifies binary of the shell(interpreter) we want to execute script, for example: <code>#! /bin/bash</code> or <code>#! /bin/zsh</code></p> <p>When we execute the script that contains <code>#!</code> what actually happens is that interpreter is executed and path used to call the script is passed as an argument. With <code>sleepy.sh</code> example we can run script with <code>./sleepy.sh &amp;</code>, where <code>&amp;</code> is used (it seems) to return the PID of the script execution process, and then we can run <code>ps -fp [PID]</code> to see process info:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token environment constant">UID</span> PID <span class="token environment constant">PPID</span> C STIME TTY TIME CMD
<span class="token number">505</span> <span class="token number">65418</span> <span class="token number">59985</span> <span class="token number">0</span> <span class="token number">7</span>:09PM ttys000 <span class="token number">0</span>:00.01 /bin/zsh ./sleepy.sh
</code></pre></div><p>If a script doesn't contain <code>#!</code> commands are executed with default shell, but it's the best practice to be explicit as different shells have slightly varying syntax.</p> <p>Also, we dont have to use only shells as interpreters for scripts. We can also use other binaries like <code>python</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#! /usr/bin/python</span>

print <span class="token string">&quot;This is a Python script&quot;</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>chmod 755 hi.py
./hi.py
This is a Python script
</code></pre></div><h2 id="variables"><a href="#variables" class="header-anchor">#</a> Variables</h2> <p>Are storage locations that have name, you can think of them as name-value pairs. Syntax used to create a variable is: <code>VARIABLE_NAME=&quot;Value&quot;</code>. It's important to note that variable names are case sensitive, and that, by convention, variable names should be all in uppercase. Also make sure to not use spaces after and before <code>=</code> sign, when declaring variable.</p> <p><strong>By default all variables are global, also they have to be defined before used.</strong> Variables can be defined in the <a href="###Functions">functions</a>, but we cannot access them before function is called.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">function</span> <span class="token function-name function">var</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token assign-left variable">GLOBAL_VAR</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token comment"># GLOBAL_VAR is not defined at this point and this will not return anything</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$GlOBAL_VAR</span>
var
<span class="token comment"># GLOBAL_VAR is now available, because function has been called</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$GlOBAL_VAR</span> <span class="token comment"># Output: 1</span>
</code></pre></div><p>Valid variable names can consist of letters, numbers and underscores, except that number cannot be the first char in the name.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Valid names</span>
<span class="token assign-left variable">DARK_JEDI</span><span class="token operator">=</span><span class="token string">&quot;Vader&quot;</span>
<span class="token assign-left variable">GR4Y_J3DI</span><span class="token operator">=</span><span class="token string">&quot;Ashoka&quot;</span>
<span class="token assign-left variable">Regular_Jedi</span><span class="token operator">=</span><span class="token string">&quot;Obi-Wan&quot;</span>

<span class="token comment"># Invalid names</span>
<span class="token assign-left variable">2DARK_LORDS</span><span class="token operator">=</span><span class="token string">&quot;Vader &amp; Sidius&quot;</span>
ONE-REBEL<span class="token operator">=</span><span class="token string">&quot;Han Solo&quot;</span>
ONE@SHIP<span class="token operator">=</span><span class="token string">&quot;Ebon Hawk&quot;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#! /bin/bash</span>
<span class="token assign-left variable">MY_SHELL</span><span class="token operator">=</span><span class="token string">&quot;zsh&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;I like the <span class="token variable">$MY_SHELL</span> shell&quot;</span>
</code></pre></div><p>We can also enclose variable name in curly braces:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">MY_SHELL</span><span class="token operator">=</span><span class="token string">&quot;zsh&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;I like the <span class="token variable">${MY_SHELL}</span> shell&quot;</span>
</code></pre></div><p>Curly braces syntax is optional unless you need to preeced or follow up the variable wit additional data, like so:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">MY_SHELL</span><span class="token operator">=</span><span class="token string">&quot;bash&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;I'm <span class="token variable">${MY_SHELL}</span>ing on my keyboard!&quot;</span>
</code></pre></div><p>Output: <code>I'm bashing on my keyboard</code>. Without curly braces this wouldn't work as the interpreter will take that <code>ing</code> following the name variable as a part of the variable name.</p> <p>We can also assign the output of the command to a variable:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">SERVER_NAME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;You are running this script on <span class="token variable">${SERVER_NAME}</span>&quot;</span>
</code></pre></div><p>We can also use <code>SERVER_NAME=`hostname`</code> which is a older syntax today mainly replaced with <code>${}</code>.</p> <h3 id="local-variables"><a href="#local-variables" class="header-anchor">#</a> Local variables</h3> <p>Local vars are created with <code>local</code> keyword, and <strong>only functions can have the local variables</strong>, so they can only be accessed within the function where they're declared.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">function</span> <span class="token function-name function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">LOCAL_VAR</span><span class="token operator">=</span><span class="token string">&quot;I'm locally scoped&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It's the best practice to use only local variables inside functions.</p> <h2 id="tests"><a href="#tests" class="header-anchor">#</a> Tests</h2> <p>With tests we can check for example: if file exists, if number is greater than another, compare if strings are equal...</p> <p>Syntax:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>contidion-to-test-for<span class="token punctuation">]</span>
</code></pre></div><p>Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>-e /etc/passwd<span class="token punctuation">]</span>
</code></pre></div><p>this tests if <code>etc/passwd</code> exists, and if it does this returns <code>true</code> - command exit status of <code>0</code>, if it doesn't exists the command exits with the exit status of <code>1</code>. Some file operators:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>-d FILE <span class="token comment">#True if the file is a directory</span>
-e FILE <span class="token comment">#True if file exists</span>
-f FILE <span class="token comment">#True if the file exists and it's regular file</span>
-r FILE <span class="token comment">#True if the file is readable by you</span>
-s FILE <span class="token comment">#True if the file exists and it's not empty</span>
-w FILE <span class="token comment">#True if the file is writable by you</span>
-x FILE <span class="token comment">#True if the file is executable by you</span>
</code></pre></div><p>String operators:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>-z STRING <span class="token comment">#True if the string is empty</span>
-n STRING <span class="token comment">#True if the string is not empty</span>
STRING1 <span class="token operator">=</span> STRING2 <span class="token comment">#True if the strings are equal</span>
STRING1 <span class="token operator">!=</span> STRING2 <span class="token comment">#True if the strings are not equal</span>
</code></pre></div><p>Arithmetic tests:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>arg1 -eq arg2 <span class="token comment">#True if the arguments are equal</span>
arg1 -ne arg2 <span class="token comment">#True if the arguments are not equal</span>
arg1 -lt arg2 <span class="token comment">#True if the arg1 is less than arg2</span>
arg1 -le arg2 <span class="token comment">#True if arg1 is less than or equal to arg2</span>
arg1 -gt arg2 <span class="token comment">#True if arg1 is greater than arg2</span>
arg1 -ge arg2 <span class="token comment">#True if arg1 is greater than or equal to arg2</span>
</code></pre></div><h2 id="if-statements"><a href="#if-statements" class="header-anchor">#</a> If statements</h2> <p>Syntax:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>condition-is-true<span class="token punctuation">]</span>
    <span class="token keyword">then</span>
        <span class="token builtin class-name">command</span> <span class="token number">1</span>
        <span class="token builtin class-name">command</span> n
    <span class="token keyword">elif</span> <span class="token punctuation">[</span>another-condition-true<span class="token punctuation">]</span>
        <span class="token keyword">then</span>
            elifCommand <span class="token number">1</span>
    <span class="token keyword">else</span>
        altCommand <span class="token number">1</span>
        altCommand n
<span class="token keyword">fi</span>
</code></pre></div><p>Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">MY_SHELL</span><span class="token operator">=</span><span class="token string">&quot;zsh&quot;</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token string">&quot;<span class="token variable">$MY_SHELL</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;zsh&quot;</span><span class="token punctuation">]</span>
    <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;You are the zsh shell user!&quot;</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;No zsh :(&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p>It's best practice to enclose variables in quotes to prevent some unexpected side effects.</p> <h2 id="for-loop"><a href="#for-loop" class="header-anchor">#</a> For loop</h2> <p>Syntax:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token for-or-select variable">VARIABLE_NAME</span> <span class="token keyword">in</span> ITEM_1 ITEM_N
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span> <span class="token number">1</span>
    <span class="token builtin class-name">command</span> <span class="token number">2</span>
<span class="token keyword">done</span>
</code></pre></div><p>Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#! /bin/zsh</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">COLOR</span> <span class="token keyword">in</span> red gree blue
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Color: <span class="token variable">$COLOR</span>&quot;</span>
<span class="token keyword">done</span>
</code></pre></div><p>It's also common for the list of items to be stored in variable like this: <code>COLORS=&quot;red green blue&quot;</code></p> <h2 id="positional-parameters"><a href="#positional-parameters" class="header-anchor">#</a> Positional parameters</h2> <p>Those are variables that contains the content of the command line</p> <p><code>script.sh param1 param2 param3</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">$0</span><span class="token builtin class-name">:</span> <span class="token string">&quot;script.sh&quot;</span>
<span class="token variable">$1</span><span class="token builtin class-name">:</span> <span class="token string">&quot;param1&quot;</span>
<span class="token variable">$2</span><span class="token builtin class-name">:</span> <span class="token string">&quot;param2&quot;</span>
<span class="token variable">$3</span><span class="token builtin class-name">:</span> <span class="token string">&quot;param3&quot;</span>
</code></pre></div><p>An practical example can be found in <a href="./archiveUser.sh">archiveUser.sh</a> We can use <code>$@</code> sign when we want to loop through script parameters:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token for-or-select variable">USER</span> <span class="token keyword">in</span> <span class="token variable">$@</span> <span class="token comment"># This will loop through all parameter passed to the script when executed</span>
    <span class="token function">passwd</span> -l <span class="token environment constant">$USER</span> <span class="token comment"># lock the account</span>
    <span class="token punctuation">..</span>.
<span class="token keyword">done</span>
</code></pre></div><h2 id="accepting-user-input-stdin"><a href="#accepting-user-input-stdin" class="header-anchor">#</a> Accepting User Input (STDIN)</h2> <p>The <code>read</code> command accepts STDIN</p> <p>Syntax: <code>read -p &quot;PROMPT&quot; VARIABLE</code> Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">read</span> -p <span class="token string">&quot;Enter a user name: &quot;</span> <span class="token environment constant">USER</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Archiving user: <span class="token environment constant">$USER</span>&quot;</span>
<span class="token punctuation">..</span>.
</code></pre></div><h2 id="exit-statuses"><a href="#exit-statuses" class="header-anchor">#</a> Exit statuses</h2> <p>Every time the script or command is executed it returns an exit status in range of 0 to 255. De facto status for success is <code>0</code>, all others are codes for an error condition. This codes can be used in scripts for error checking. We can find what various exit statuses mean we can check documentation for that error code, or look into source code.</p> <p>We can use <code>$?</code> to check the exit status of the previously executed command.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ls</span> /dir
<span class="token punctuation">..</span>.
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
</code></pre></div><p>If dir exists <code>echo $?</code> will return <code>0</code> status code, otherwise it should return <code>2</code>, error code for directory not found. An practical example can be found in <a href="./checkConnection.sh">checkConnection.sh</a>.</p> <p>We can explicitly define the return codes with <code>exit</code> command:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token builtin class-name">exit</span> <span class="token number">3</span>
etc<span class="token punctuation">..</span>.
</code></pre></div><p>Simply use the <code>exit</code> command in your script and follow it with the integer in range of 0 to 255. If we do not specify the return code with the <code>exit</code> command, then the exit status of the previously executed command in the shellscript will be used as the exit status. This is also true if we do not include <code>exit</code> command at all. Whenever the <code>exit</code> command is reached the shellscript will stop running.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token string">&quot;google.com&quot;</span>

<span class="token function">ping</span> -c <span class="token number">1</span> <span class="token variable">$HOST</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token string">&quot;<span class="token variable">$?</span>&quot;</span> -ne <span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$HOST</span> unreachable&quot;</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre></div><h2 id="and"><a href="#and" class="header-anchor">#</a> &amp;&amp; AND ||</h2> <p>We can chain together multiple commands with this logical operators.</p> <ul><li><code>&amp;&amp; = AND</code> <code>mkdir /tmp/bak &amp;&amp; cp test.txt /tmp/bak</code> The command following <code>&amp;&amp;</code> will always be executed if the previous command succeeds(aka exits with <code>0</code> exit status).</li> <li><code>|| = OR</code> <code>cp test.txt /tmp/bak || cp test.txt /tmp</code> On the other hand, the command following the <code>||</code> will only execute if the previous command fails(aka exits with non-zero exit status).</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#! /bin/bash</span>
<span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token string">&quot;google.com&quot;</span>
<span class="token function">ping</span> -c <span class="token number">1</span> <span class="token variable">$HOST</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$HOST</span> reachable.&quot;</span>
</code></pre></div><h2 id="the-semicolon"><a href="#the-semicolon" class="header-anchor">#</a> The semicolon</h2> <p>If we want to ensure that all commands will be executed we can separate them with <code>;</code>: <code>cp test.txt /tmp/bak/ ; cp test.txt /tmp/</code> This is basically same as running this two commands on separate lines.</p> <p>It's important to note that <code>semicolon</code> does not check for exit statuses of the executed commands. The command following <code>;</code> will be always executed no matter if the previous command fails or succeeds.</p> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <p>For functions we can say that they're shellscripts within shellscript.</p> <p>One of the main reasons why we are using functions is to follow the DRY principle, which means that we should write function once, and then we can use it many times. This can sometimes drastically reduce the script length, and also it's much easier to maintain as we have single function to edit and troubleshoot.</p> <h3 id="creating-a-function"><a href="#creating-a-function" class="header-anchor">#</a> Creating a function</h3> <p>It's important to note that function must be defined before it's called. We can pass parameters to the functions, and then access those params inside of the function. There are two ways to create a function in the shellscript:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">function</span> function-<span class="token function-name function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment"># Code</span>
<span class="token punctuation">}</span>
<span class="token comment"># function keyword is optional</span>
<span class="token comment"># so this is also correct</span>
another-<span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment"># Another code</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="calling-a-function"><a href="#calling-a-function" class="header-anchor">#</a> Calling a function</h3> <p>To call or execute the function we can simply list it's name in the script (after it's being defined ofc):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">function</span> <span class="token function-name function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>

hello
</code></pre></div><p>Functions can call other functions, you can see an example in <a href="./functions.sh">functions.sh</a>. You can see there that the <code>hello</code> function calls <code>now</code> function before it's declared, but that's okay as the <code>now</code> function gets read into the script before the <code>hello</code> function is called, so in the order of the execution it's defined before it's used. For example something like this wont work:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">function</span> <span class="token function-name function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    now
<span class="token punctuation">}</span>
hello <span class="token comment"># hello is called before now is defined</span>
<span class="token keyword">function</span> <span class="token function-name function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%r<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Functions also have <code>positional parameters</code>, and <code>$@</code> also contains the list of all parameters.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># $0 is the script itself, not the function name</span>
<span class="token keyword">function</span> <span class="token function-name function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello <span class="token variable">$1</span> <span class="token variable">$2</span>&quot;</span>
<span class="token punctuation">}</span>
hello Shell World
<span class="token comment"># Output: Hello Shell World</span>
</code></pre></div><p>Functions also have access to all global variables.</p> <h3 id="function-exit-statuses-aka-return-codes"><a href="#function-exit-statuses-aka-return-codes" class="header-anchor">#</a> Function exit statuses aka return codes</h3> <p>All functions have an exit status. We can explicitly return status within function with <code>return</code> keyword:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">function</span> <span class="token function-name function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> <span class="token number">1</span> <span class="token comment"># return code</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or status can be returned implicitly with the exit status of the last command executed in the function</p> <p>All exit status rules are the same as the status rules we've explored so far.</p> <h2 id="wildcards"><a href="#wildcards" class="header-anchor">#</a> Wildcards</h2> <p>A Wildcard is a character or string used for pattern matching. We can use them to create search patterns that when expanded will return the list of matching files and directories. They can be used with the most commands, like <code>ls</code>, <code>rm</code>, <code>mv</code>, <code>cp</code> and others.</p> <p>Wildcards are sometimes referred to as <code>globbs</code> or <code>globb</code> patterns, <code>globbing</code> is the act of expanding wildcard into the list of the matching files and directories.</p> <p>They are great when we need to work with a specific group of the files or directories.</p> <p>Here are the two main wildcards:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># * - matches zero or more characters, we can say that this matches anything</span>
*.txt  <span class="token comment"># Select all files with txt extension</span>
a*     <span class="token comment"># Select all files that start with the letter a</span>
a*.txt <span class="token comment"># Selects all files that starts with letter a nad are txt files</span>

<span class="token comment"># ? - matches exactly one character</span>
?.txt  <span class="token comment"># Selects all files that have exactly one character preceding .txt</span>
a?     <span class="token comment"># Selects all two letter files that starts with char a</span>
a?.txt <span class="token comment"># Selects all two letter files that starts with a and are txt files</span>
</code></pre></div><h2 id="character-classes"><a href="#character-classes" class="header-anchor">#</a> Character Classes</h2> <p><code>[]</code> is a character class. It matches any, but only one, of the characters included between the brackets: <code>[aeiou]</code> <code>ca[nt]*</code> - matches, for example: can, candy, catch, cat</p> <p>We can also exclude characters in the match with <code>[!]</code>: <code>[!aeiou]*</code> - This matches all files that don't start with a vowel, for example: config, data, list etc.</p> <p>We can also create ranges in character class with <code>[a-d]*</code> for example. This matches all files that start with a, b, c or d. <code>[1-3]*</code> matches all files that start with 1, 2 or 3.</p> <p>Instead of creating custom ranges we can also use predefined named character classes. Those represents the most commonly used ranges:</p> <ul><li>[[:alpha:]] - Matches alphabetic letters, both lower and uppercase</li> <li>[[:alnum:]] - Matches alphanumeric characters</li> <li>[[:digit:]] - Matches numbers in decimal from 0 to 9</li> <li>[[:lower:]] - matches any lowercase letters</li> <li>[[:upper:]] - matches whitespace</li> <li>[[:space:]] - matches any uppercase letters</li></ul> <p>If we want to match a wildcard character we can escape it with <code>\</code> escape character. <code>*\?</code> - Match all files that end with the question mark</p> <p>Just for sanity stay away from naming files with * or ?.</p> <p>An practical example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#! /bin/bash</span>
<span class="token builtin class-name">cd</span> ./src/components
<span class="token keyword">for</span> <span class="token for-or-select variable">FILE</span> <span class="token keyword">in</span> *.jsx <span class="token comment"># this can be also ./src/components/*.jsx</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Copying <span class="token variable">$FILE</span>&quot;</span>
    <span class="token function">cp</span> <span class="token variable">$FILE</span> ./just-jsx
<span class="token keyword">done</span>
</code></pre></div><h2 id="case-statements"><a href="#case-statements" class="header-anchor">#</a> Case statements</h2> <p>Case statements are the alternative to if statements, as they are sometimes easier to read. One common place for case statements use are a system startup scripts. Syntax:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$VAR</span>&quot;</span> <span class="token keyword">in</span>
    pattern_1<span class="token punctuation">)</span>
        <span class="token comment"># Some commands here.</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment"># Execution will stop when double semicolon is reached (somethin' like a break in js)</span>
    pattern_n<span class="token punctuation">)</span>
        <span class="token comment"># Some commands here.</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><p>Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
    start<span class="token operator">|</span>START<span class="token punctuation">)</span> <span class="token comment"># We can use single | here as an OR</span>
        /usr/sbin/sshd
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token operator">|</span>STOP<span class="token punctuation">)</span>
        <span class="token function">kill</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> var/run/sshd.pid<span class="token variable">)</span></span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span> <span class="token comment"># this will act as a catch all and will match anything else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: <span class="token variable">$0</span> start|stop&quot;</span><span class="token punctuation">;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><p>Note that the patterns are case sensitive.</p> <h2 id="logging"><a href="#logging" class="header-anchor">#</a> Logging</h2> <p>You may want to keep record of what's happening during the execution of the shellscript. <strong>Logs should answer who, what, when, where and why.</strong></p> <p>Linux OS uses the <code>syslog</code> standard for the message logging. This allows programs and applications to generate messages that can be captured, processed and stored by the system logger. This eliminates need for each and every application having to implement a logging mechanism. This means that we can take advantage of this logging system in shellscripts.</p> <p>The <code>syslog</code> standard uses facilities and severities to categorize messages.</p> <ul><li>Facilities: kern, user, mail, daemon, auth, local0 to local7</li> <li>Severities (ordered by severity): emerg, alert, crit, err, warning, notice, info, debug</li></ul> <p>Each message is labeled with the facility code and severity level.Facilities are used to determine from what type of program or part of the system message originates from.</p> <h2 id="while-loops"><a href="#while-loops" class="header-anchor">#</a> While loops</h2> <p>A while loop is a loop that repeats series of commands as long as the condition is true.</p> <p>Syntax:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token punctuation">[</span>condition-is-true<span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span> <span class="token number">1</span>
    <span class="token builtin class-name">command</span> <span class="token number">2</span>
    <span class="token builtin class-name">command</span> n
<span class="token keyword">done</span>
</code></pre></div><p>Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">INDEX</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token variable">$INDEX</span> -lt <span class="token number">6</span><span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Creating file-<span class="token variable">${INDEX}</span>&quot;</span>
    <span class="token function">touch</span> /usr/local/project/file-<span class="token variable">${INDEX}</span>.txt
    <span class="token variable"><span class="token punctuation">((</span>INDEX<span class="token operator">++</span><span class="token punctuation">))</span></span> <span class="token comment"># This is called arithmetic expansion. We can enclose math expressions inside double ()</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token string">&quot;<span class="token variable">$CORRECT</span>&quot;</span> <span class="token operator">!=</span> <span class="token punctuation">[</span>y<span class="token operator">|</span>Y<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">read</span> -p <span class="token string">&quot;Enter your name: &quot;</span> NAME
    <span class="token builtin class-name">read</span> -p <span class="token string">&quot;Is <span class="token variable">${NAME}</span> correct? &quot;</span> CORRECT
<span class="token keyword">done</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Check if server is online</span>
<span class="token keyword">while</span> <span class="token function">ping</span> -c <span class="token number">1</span> App <span class="token operator">&gt;</span>/dev/null
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;App still upp!&quot;</span>
    <span class="token function">sleep</span> <span class="token number">5</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;App is down, continue&quot;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Read a file line, by line</span>
<span class="token assign-left variable">LINE_NUM</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> LINE
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${LINE_NUM}</span>: <span class="token variable">${LINE}</span>&quot;</span>
    <span class="token variable"><span class="token punctuation">((</span>LINE_NUM<span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> /etc/fstab
</code></pre></div><p>Condition can be any command, and if command exits with the status code of <code>0</code> then the while loop will continue. When command fails and return non-zero exit status, the condition is false and while loop stops.</p> <p>We can make infinite loop on purpose, this can be useful for a service tasks for example, and will be running in the background until it's killed.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span> N
    <span class="token function">sleep</span> <span class="token number">1</span>
<span class="token keyword">done</span>
</code></pre></div><p>We can exit the loop before it's normal ending by using <code>break</code> statement. This exits the loop, but doesn't exits the script, so the script will continue executing.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">read</span> -p <span class="token string">&quot;1: Show disk usage. 2: Show uptime. &quot;</span> CHOICE
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$CHOICE</span>&quot;</span> <span class="token keyword">in</span>
        <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token function">df</span> -h
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token function">uptime</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token builtin class-name">break</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token keyword">done</span>
</code></pre></div><p>We can also use <code>continue</code> statement if we want to skip over commands that are after <code>continue</code>. Exectuion continues back at the top of the loop and the while condition is examined again.</p> <h2 id="debugging-shellscript"><a href="#debugging-shellscript" class="header-anchor">#</a> Debugging shellscript</h2> <p>There are options built-in into <code>bash</code> that can help with debugging and fixing errors in shellscripts.</p> <p>We can provide the first line in our script that starts with <code>#!</code> one or more modifiers, for example: <code>#! /bin/bash -x</code>, this is called <code>x-trace</code> or <code>tracing</code> and will print commands as they execute. We can run this via command line with <code>set -x</code> command, and to stop we can run <code>set +x</code>.</p> <p>We can turn debugging on just for the portion of our script:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">TEST_VAR</span><span class="token operator">=</span><span class="token string">&quot;TEST123&quot;</span>
<span class="token builtin class-name">set</span> -x
<span class="token builtin class-name">echo</span> <span class="token variable">$TEST_VAR</span>
<span class="token builtin class-name">set</span> +x
<span class="token function">hostname</span>
</code></pre></div><p>Another useful option that can help with finding errors in shellscripts is the <code>-e</code> option. It causes your script to exit immediately if the command exits with a non-zero exit status. It can be combined with other options, like: <code>#! /bin/bash -x -e</code> or <code>#! /bin/bash -ex</code>, order is not important.</p> <p>Yet another useful option is <code>-v</code> which prints shell input lines as they are read. This one can be combined with other options, too.</p> <p>For more helpers we can run <code>help -set | less</code>.</p> <h2 id="debugging-startup-time"><a href="#debugging-startup-time" class="header-anchor">#</a> Debugging startup time</h2> <ul><li><a href="/CompSci/Programming/Shell/troubleshooting_startup_time.html">Troubleshooting zsh startup time</a></li></ul> <h2 id="reference-related"><a href="#reference-related" class="header-anchor">#</a> Reference/Related</h2> <ul><li><a href="/CompSci/blog/shellscripting.html">Shellscripting</a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/12/2020, 5:46:19 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div></div></div>
    <script src="/CompSci/assets/js/app.addad5ad.js" defer></script><script src="/CompSci/assets/js/2.47d44203.js" defer></script><script src="/CompSci/assets/js/47.b4eab3c5.js" defer></script><script src="/CompSci/assets/js/20.0d670cf8.js" defer></script>
  </body>
</html>
