<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to do great code reviews | Signal in the Static</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="Blog, notes and other stuff">
    
    <link rel="preload" href="/CompSci/assets/css/0.styles.6f26e208.css" as="style"><link rel="preload" href="/CompSci/assets/js/app.addad5ad.js" as="script"><link rel="preload" href="/CompSci/assets/js/2.47d44203.js" as="script"><link rel="preload" href="/CompSci/assets/js/57.1dfab7ee.js" as="script"><link rel="preload" href="/CompSci/assets/js/20.0d670cf8.js" as="script"><link rel="prefetch" href="/CompSci/assets/js/10.e31f02d3.js"><link rel="prefetch" href="/CompSci/assets/js/11.d5feaa99.js"><link rel="prefetch" href="/CompSci/assets/js/12.a5967c73.js"><link rel="prefetch" href="/CompSci/assets/js/13.9fa019de.js"><link rel="prefetch" href="/CompSci/assets/js/14.bc022209.js"><link rel="prefetch" href="/CompSci/assets/js/15.d6444033.js"><link rel="prefetch" href="/CompSci/assets/js/16.8a44ed26.js"><link rel="prefetch" href="/CompSci/assets/js/17.0ecfb4d2.js"><link rel="prefetch" href="/CompSci/assets/js/18.64b8ed2a.js"><link rel="prefetch" href="/CompSci/assets/js/19.cc0c9ef2.js"><link rel="prefetch" href="/CompSci/assets/js/21.f66a1dc4.js"><link rel="prefetch" href="/CompSci/assets/js/22.680babcf.js"><link rel="prefetch" href="/CompSci/assets/js/23.794ee8d2.js"><link rel="prefetch" href="/CompSci/assets/js/24.cad1687d.js"><link rel="prefetch" href="/CompSci/assets/js/25.663b74d1.js"><link rel="prefetch" href="/CompSci/assets/js/26.b11977b9.js"><link rel="prefetch" href="/CompSci/assets/js/27.ae536eda.js"><link rel="prefetch" href="/CompSci/assets/js/28.29dea75b.js"><link rel="prefetch" href="/CompSci/assets/js/29.9a87d335.js"><link rel="prefetch" href="/CompSci/assets/js/3.ccc921c2.js"><link rel="prefetch" href="/CompSci/assets/js/30.c2096d66.js"><link rel="prefetch" href="/CompSci/assets/js/31.2be6701e.js"><link rel="prefetch" href="/CompSci/assets/js/32.1462fde3.js"><link rel="prefetch" href="/CompSci/assets/js/33.68c36b33.js"><link rel="prefetch" href="/CompSci/assets/js/34.5a46dc54.js"><link rel="prefetch" href="/CompSci/assets/js/35.4e585339.js"><link rel="prefetch" href="/CompSci/assets/js/36.93bc9b6c.js"><link rel="prefetch" href="/CompSci/assets/js/37.51f67130.js"><link rel="prefetch" href="/CompSci/assets/js/38.dd925397.js"><link rel="prefetch" href="/CompSci/assets/js/39.35a0d3b3.js"><link rel="prefetch" href="/CompSci/assets/js/4.c62e6f70.js"><link rel="prefetch" href="/CompSci/assets/js/40.6facb7d6.js"><link rel="prefetch" href="/CompSci/assets/js/41.0f7863a8.js"><link rel="prefetch" href="/CompSci/assets/js/42.db0d06b4.js"><link rel="prefetch" href="/CompSci/assets/js/43.800ded10.js"><link rel="prefetch" href="/CompSci/assets/js/44.ae7b50e7.js"><link rel="prefetch" href="/CompSci/assets/js/45.3182a574.js"><link rel="prefetch" href="/CompSci/assets/js/46.5c2f482c.js"><link rel="prefetch" href="/CompSci/assets/js/47.b4eab3c5.js"><link rel="prefetch" href="/CompSci/assets/js/48.3d41b55c.js"><link rel="prefetch" href="/CompSci/assets/js/49.6b99470f.js"><link rel="prefetch" href="/CompSci/assets/js/5.91ddd819.js"><link rel="prefetch" href="/CompSci/assets/js/50.c39f5614.js"><link rel="prefetch" href="/CompSci/assets/js/51.872060eb.js"><link rel="prefetch" href="/CompSci/assets/js/52.a078762b.js"><link rel="prefetch" href="/CompSci/assets/js/53.8b85d108.js"><link rel="prefetch" href="/CompSci/assets/js/54.9763887a.js"><link rel="prefetch" href="/CompSci/assets/js/55.cd6eabe4.js"><link rel="prefetch" href="/CompSci/assets/js/56.c97228ad.js"><link rel="prefetch" href="/CompSci/assets/js/58.3f8799b9.js"><link rel="prefetch" href="/CompSci/assets/js/59.78e29f34.js"><link rel="prefetch" href="/CompSci/assets/js/6.78870d27.js"><link rel="prefetch" href="/CompSci/assets/js/60.9a431ff8.js"><link rel="prefetch" href="/CompSci/assets/js/61.b31b6293.js"><link rel="prefetch" href="/CompSci/assets/js/62.e9f3c305.js"><link rel="prefetch" href="/CompSci/assets/js/63.73488751.js"><link rel="prefetch" href="/CompSci/assets/js/64.f6bebfb5.js"><link rel="prefetch" href="/CompSci/assets/js/65.158e176a.js"><link rel="prefetch" href="/CompSci/assets/js/66.491572cf.js"><link rel="prefetch" href="/CompSci/assets/js/67.98dd3c27.js"><link rel="prefetch" href="/CompSci/assets/js/7.ae7feb21.js"><link rel="prefetch" href="/CompSci/assets/js/8.cb0d75f6.js"><link rel="prefetch" href="/CompSci/assets/js/9.c968d3cc.js">
    <link rel="stylesheet" href="/CompSci/assets/css/0.styles.6f26e208.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CompSci/" class="home-link router-link-active"><!----> <span class="site-name">Signal in the Static</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CompSci/" class="nav-link">Home</a></div><div class="nav-item"><a href="/CompSci/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/CompSci/about/" class="nav-link">About</a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CompSci/" class="nav-link">Home</a></div><div class="nav-item"><a href="/CompSci/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/CompSci/about/" class="nav-link">About</a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/CompSci/blog/" aria-current="page" class="sidebar-link">Blog</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Notes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Books/" class="sidebar-heading clickable open"><span>Books</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/CompSci/Books/A_Mathematician-s_Lament.html" class="sidebar-link">A Mathematician's Lament</a></li><li><a href="/CompSci/Books/Art_of_problem_solving_Vol.1.html" class="sidebar-link">The Art of Problem Solving, Vol. 1: The Basics</a></li><li><a href="/CompSci/Books/Design_patterns.html" class="sidebar-link">Head First Design Patterns</a></li><li><a href="/CompSci/Books/ydkjs_notes.html" class="sidebar-link">You Don't Know JS (yet)</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/CompSci/" class="sidebar-heading clickable"><span>CompSci</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Math/" class="sidebar-heading clickable"><span>Math</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CompSci/Programming/" class="sidebar-heading clickable"><span>Programming</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-solarized-content content__default"><p>There is a consensus that code reviews are an essential aspect of highly effective teams. However, it's all too common to see code reviews that barely scratch the surface or offer feedback that is unclear or hard to act upon. This robs the team of the opportunity to speed up learning, share knowledge and context, and raise the quality bar on the resulting code.</p> <p>Let's talk about how we can make it much better.</p> <h2 id="keep-your-pull-requests-small"><a href="#keep-your-pull-requests-small" class="header-anchor">#</a> Keep Your Pull Requests Small</h2> <p>As simple as this sounds, this is easily the most impactful technique you can follow to level up your code review workflow. There are two fundamental reasons why this works:</p> <ul><li>It's mentally more comfortable to start and complete a review for a small piece. Larger PRs will naturally make reviewers delay and procrastinate examining the work, and they are more likely to be interrupted mid-review.</li> <li>As a reviewer, it's exponentially harder to dive deep if the PR is long. The more code there is to examine, the bigger the mental map we need to build to understand the whole piece. Breaking up your work in smaller chunks increases your chances of getting faster and more in-depth reviews.</li></ul> <p>The guideline would be around 200-300 lines of code affected. If we go above this threshold, we should almost always break up the work into smaller blocks. Of course, we need to be careful about breaking up PRs into chunks that are too small since this means reviewers may need to inspect several PRs to understand the overall picture.</p> <h2 id="use-draft-prs"><a href="#use-draft-prs" class="header-anchor">#</a> Use Draft PRs</h2> <p>It's common practice to use Work In Progress (WIP) PRs to elicit early feedback whose goal is validating direction (choice of algorithm, design, API, etc.). Early changes mean less wasted effort on details, polish, documentation, etc. As an author, this means you need to be open to changing the direction of your work.</p> <h2 id="one-pr-per-concern"><a href="#one-pr-per-concern" class="header-anchor">#</a> One PR Per Concern</h2> <p>In addition to line count, another dimension to consider is how many matters your unit of work is trying to address. A matter may be a feature, a bugfix, a dependency upgrade, an API change, etc. Are you introducing a new feature while refactoring at the same time? Fixing two bugs in one shot or introducing a library upgrade and a new service?</p> <p>Breaking down PRs into individual concerns has the following effects:</p> <ul><li><strong>More independent review units</strong> and therefore better review quality</li> <li><strong>Fewer affected people</strong>, therefore fewer domains of expertise to gather</li> <li><strong>Atomicity of rollbacks</strong>, the ability to roll back a small commit or PR. This is valuable because if something goes wrong, it will be easier to identify where errors were introduced and what to roll back.</li> <li><strong>Separating easy stuff from hard stuff</strong>. Imagine a new feature that requires refactoring a frequently used API. You change the API, update a dozen call-sites, and then implement your feature. 80% of your changes are apparent and skimmable with no functional changes. In comparison, 20% are new code that needs careful attention to test coverage, intended behavior, error handling, etc., and will likely go through multiple revisions. With each revision, the reviewer will need to skim through all the changes to find the relevant bits. By splitting this into two PRs, it becomes easy to quickly land most of the work and optimize the review effort applied to the more challenging work.</li></ul> <h2 id="focus-on-the-code-not-the-person"><a href="#focus-on-the-code-not-the-person" class="header-anchor">#</a> Focus on the Code, Not the Person</h2> <p>I know that almost all of us sometimes in our careers had a situation where you go into CR with low expectations and then realize that the situation is much worse and that the new code is a pile of garbage. When this happens, we should give our criticism in a non-biased way, focusing on the code and not on the person who wrote that code.</p> <p>Focus on the code, not the person practice refers to communication styles and relationships between people. Fundamentally, it's about trying to make the product better and avoid the author perceiving a review as a personal criticism.</p> <p>Here are some tips you can follow:</p> <ul><li>As a reviewer, think, <em>This is our code, how can we improve on it?</em></li> <li>Offer positive remarks! If you see something done well, comment on it. This reinforces good work and helps the author balance suggestions for improvement.</li> <li>As an author, assume the best intention and don't take comments personally.</li></ul> <p>Ultimately, a code review is a learning and teaching opportunity and should be celebrated as such.</p> <h2 id="give-your-reviewers-introduction-to-changes"><a href="#give-your-reviewers-introduction-to-changes" class="header-anchor">#</a> Give Your Reviewers introduction to changes</h2> <p>Last but not least, the description of your PR is crucial. Depending on who you picked for review, different people will have a different context. The onus is on the author to help reviewers by providing essential information or links to more context to produce meaningful feedback.</p> <p>Some questions you can include in your PR templates:</p> <ul><li>Why is this PR necessary?</li> <li>Who benefits from this?</li> <li>What could go wrong?</li> <li>What other approaches did you consider? Why did you decide on this approach?</li> <li>What other systems does this affect?</li></ul> <p>Good code is not only bug-free; it is also useful! As an author, ensure that your PR description ties your code back to your team's objectives, ideally with a link to a feature or bug description in your backlog. As a reviewer, start with the PR description; if it's incomplete, send it back before attempting to judge the code's suitability against undefined objectives. And remember, sometimes the best outcome of a code review is to realize that the code isn't needed at all!</p> <hr> <h2 id="profit"><a href="#profit" class="header-anchor">#</a> Profit?</h2> <p>By adopting some of the techniques above, you can substantially impact your software building process's speed and quality. But beyond that, there's the potential for a cultural effect:</p> <ul><li>Teams will build a common understanding. The group understands your work better, and you're not the only person capable of evolving any one area of the codebase.</li> <li>Teams will adopt a sense of shared responsibility. If something breaks, it's not one person's code that needs fixing. It's the team's work that needs fixing.</li> <li>Anyone person in a team should be able to take a holiday and disconnect from work for a number of days without risking the business or stressing about checking email to make sure the world didn't end.</li></ul> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ol><li>Shane McIntosh, Yasutaka Kamei, Bram Adams, Ahmed E. Hassan, An Empirical Study of the Impact of Modern Code Review Practices on Software Quality, <a href="https://sail.cs.queensu.ca/Downloads/EMSE_AnEmpiricalStudyOfTheImpactOfModernCodeReviewPracticesOnSoftwareQuality.pdf" target="_blank" rel="noopener noreferrer">sail.cs.queensu.ca<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Alejandro Lujan Toro, Great Code Reviews - The Superpower Your Team Needs, 2020, <a href="https://shopify.engineering/great-code-reviews" target="_blank" rel="noopener noreferrer">shopify.engineering<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/1/2021, 1:50:30 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div></div></div>
    <script src="/CompSci/assets/js/app.addad5ad.js" defer></script><script src="/CompSci/assets/js/2.47d44203.js" defer></script><script src="/CompSci/assets/js/57.1dfab7ee.js" defer></script><script src="/CompSci/assets/js/20.0d670cf8.js" defer></script>
  </body>
</html>
